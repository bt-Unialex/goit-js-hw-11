{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport function searchImage(request) {\n  const API_KEY = '49253518-6fbcd3e4502fdc6eae88c44f3';\n  const URL =\n    'https://pixabay.com/api/?key=' +\n    API_KEY +\n    '&q=' +\n    encodeURIComponent(request) +\n    '&image_type=photo' +\n    '&orientation=horizontal' +\n    '&safesearch=true';\n\n  return axios.get(URL);\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { galleryHTML } from '../main';\n\nexport function renderGallary(images) {\n  let markup = images\n    .map(\n      image => `\n      <li>\n        <a href=\"${image.largeImageURL}\"><img src=\"${image.webformatURL}\" alt=\"${image.tags}\" width=\"360\" height=\"200\" /></a>\n        <table class=\"caption\">\n          <thead>\n            <tr>\n              <th>Likes</th>\n              <th>Views</th>\n              <th>Comments</th>\n              <th>Downloads</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr>\n              <td>${image.likes}</td>\n              <td>${image.views}</td>\n              <td>${image.comments}</td>\n              <td>${image.downloads}</td>\n            </tr>\n          </tbody>\n        </table>\n      </li>`\n    )\n    .join('');\n\n  // const galleryOption = {\n  //   captionSelector: 'img',\n  //   captionType: 'attr',\n  //   captionsData: 'alt',\n  //   captionDelay: 250,\n  // };\n  let gallery = new SimpleLightbox('.gallery a');\n  galleryHTML.innerHTML = markup;\n\n  gallery.refresh();\n\n  //   gallery.on('show.simplelightbox', function () {\n  //     // Do somethingâ€¦\n  //   });\n\n  // gallery.on('error.simplelightbox', function (e) {\n  //   console.log(e); // Some usefull information\n  // });\n}\n","import { searchImage } from './js/pixabay-api';\nimport { renderGallary } from './js/render-functions';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\niziToast.settings({\n  position: 'topRight',\n  iconColor: '#fff',\n  messageColor: '#fff',\n});\n\nlet images = [];\nexport const galleryHTML = document.querySelector('.gallery');\nconst form = document.querySelector('.form');\n\n// form.lastElementChild.classList.add('hidden'); //hide loader text\n\nform.addEventListener('submit', handleClick);\n\nfunction handleClick(event) {\n  event.preventDefault();\n  const request = form.elements.request.value.trim();\n  galleryHTML.innerHTML = '';\n  form.elements.request.setAttribute('readonly', true); //readonly for input\n  form.elements.button.setAttribute('disabled', true); //disable button\n  form.lastElementChild.classList.remove('hidden'); //show loader text\n\n  searchImage(request)\n    .then(response => {\n      //   console.log('response', response);\n      images = [...response.data.hits];\n      if (images.length !== 0) {\n        form.elements.request.value = '';\n        renderGallary(images);\n      } else {\n        throw new Error(\n          'Sorry, there are no images matching your search query. Please, try again!'\n        );\n      }\n    })\n    .catch(error => {\n      console.dir(error);\n\n      iziToast.error({\n        iconUrl: 'img/error.svg',\n        message: error.message,\n      });\n    })\n    .finally(() => {\n      form.request.removeAttribute('readonly'); // Restore\n      form.elements.button.removeAttribute('disabled'); // elements\n      form.lastElementChild.classList.add('hidden'); // state\n    });\n}\n"],"names":["searchImage","request","URL","axios","renderGallary","images","markup","image","gallery","SimpleLightbox","galleryHTML","iziToast","form","handleClick","event","response","error"],"mappings":"owBAEO,SAASA,EAAYC,EAAS,CAEnC,MAAMC,EACJ,gCAFc,qCAId,MACA,mBAAmBD,CAAO,EAC1B,2DAIF,OAAOE,EAAM,IAAID,CAAG,CACtB,CCVO,SAASE,EAAcC,EAAQ,CACpC,IAAIC,EAASD,EACV,IACCE,GAAS;AAAA;AAAA,mBAEIA,EAAM,aAAa,eAAeA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAYvEA,EAAM,KAAK;AAAA,oBACXA,EAAM,KAAK;AAAA,oBACXA,EAAM,QAAQ;AAAA,oBACdA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA,YAKnC,EACK,KAAK,EAAE,EAQNC,EAAU,IAAIC,EAAe,YAAY,EAC7CC,EAAY,UAAYJ,EAExBE,EAAQ,QAAS,CASnB,CC7CAG,EAAS,SAAS,CAChB,SAAU,WACV,UAAW,OACX,aAAc,MAChB,CAAC,EAED,IAAIN,EAAS,CAAE,EACR,MAAMK,EAAc,SAAS,cAAc,UAAU,EACtDE,EAAO,SAAS,cAAc,OAAO,EAI3CA,EAAK,iBAAiB,SAAUC,CAAW,EAE3C,SAASA,EAAYC,EAAO,CAC1BA,EAAM,eAAgB,EACtB,MAAMb,EAAUW,EAAK,SAAS,QAAQ,MAAM,KAAM,EAClDF,EAAY,UAAY,GACxBE,EAAK,SAAS,QAAQ,aAAa,WAAY,EAAI,EACnDA,EAAK,SAAS,OAAO,aAAa,WAAY,EAAI,EAClDA,EAAK,iBAAiB,UAAU,OAAO,QAAQ,EAE/CZ,EAAYC,CAAO,EAChB,KAAKc,GAAY,CAGhB,GADAV,EAAS,CAAC,GAAGU,EAAS,KAAK,IAAI,EAC3BV,EAAO,SAAW,EACpBO,EAAK,SAAS,QAAQ,MAAQ,GAC9BR,EAAcC,CAAM,MAEpB,OAAM,IAAI,MACR,2EACD,CAEJ,CAAA,EACA,MAAMW,GAAS,CACd,QAAQ,IAAIA,CAAK,EAEjBL,EAAS,MAAM,CACb,QAAS,gBACT,QAASK,EAAM,OACvB,CAAO,CACF,CAAA,EACA,QAAQ,IAAM,CACbJ,EAAK,QAAQ,gBAAgB,UAAU,EACvCA,EAAK,SAAS,OAAO,gBAAgB,UAAU,EAC/CA,EAAK,iBAAiB,UAAU,IAAI,QAAQ,CAClD,CAAK,CACL"}